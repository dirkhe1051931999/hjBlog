# ç†è§£ js æ¨¡å—è§„èŒƒï¼šCommonJSã€AMDã€CMDã€UMD å’Œ ES6 module

## CommonJS

1. æœåŠ¡ç«¯æ¨¡å—è§„èŒƒï¼ŒES5 çš„ Nodejs é‡‡ç”¨äº†è¿™ä¸ªè§„èŒƒ
2. ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼ŒåŠ è½½ä½¿ç”¨ require æ–¹æ³•è¯»å–æ–‡ä»¶
3. CommonJS æ˜¯åŒæ­¥çš„ï¼Œåªæœ‰åŠ è½½å®Œæˆæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œ
4. è¿™ç§æ–¹æ³•é€‚ç”¨äºæ–‡ä»¶å·²ç»åœ¨ç¡¬ç›˜ä¸­äº†ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œå¦‚æœæ˜¯æœåŠ¡ç«¯æ–‡ä»¶ï¼Œå°±è¦ç”¨å…¶ä»–æ–¹å¼äº†

```js
// user.js
var user = {};
user.login = function() {};
user.logout = function() {};
module.exports = user;
// login.js
var user = require('user.js');
user.login();
user.logout();
```

## ADM(Require.js)

1. æ”¯æŒæµè§ˆå™¨ç¯å¢ƒ
2. AMD æ˜¯ Require.js æ¨å¹¿çš„æ—¶å€™å®šä¹‰çš„è§„èŒƒ
3. AMD æ˜¯å¼‚æ­¥åŠ è½½ï¼Œæ”¯æŒå¯¹è±¡ï¼Œå‡½æ•°ï¼Œæ„é€ å™¨ï¼Œå­—ç¬¦ä¸²ï¼Œjson ç­‰ç±»å‹çš„åŠ è½½
4. AMD æ˜¯æå‰åŠ è½½

- ğŸŒ°

```html
<!-- index.html -->
<script src="https://cdn.bootcss.com/require.js/2.3.6/require.js" data-main="main"></script>
```

```js
// main.js
define(['main.1', 'main.2'], function(main1, main2) {
  console.log(main1);
  main1.say();
  main2.say();
  // è¾“å‡º
  // main1
  // main2
});
```

```js
// main.1.js
define(function(require, exports, module) {
  var obj = {};
  obj.say = function() {
    console.log('main1');
  };
  module.exports = obj;
});
```

```js
// main.2.js
define(function(require, exports, module) {
  var obj = {};
  obj.say = function() {
    console.log('main2');
  };
  return obj;
});
```

## CMD(Sea.js)

1. æ”¯æŒæµè§ˆå™¨ç¯å¢ƒ
2. ä¸ AMD çš„åŒºåˆ«æ˜¯ï¼ŒCMD æ˜¯å°±è¿‘ä¾èµ–ï¼Œè€Œ AMD æ˜¯å‰ç½®ä¾èµ–

- ğŸŒ°

```html
<!-- index.html -->
<script src="https://cdn.bootcss.com/seajs/3.0.2/sea.js"></script>
<script>
  seajs.use('./enter', function(enter) {
    enter.say();
    // è¾“å‡º
    // main
  });
</script>
```

```js
// enter.js
define(function(require, exports, module) {
  var enter1 = require('./enter.1');
  var obj = {};
  enter1.say();
  var enter2 = require('./enter.2');
  enter2.say();
  obj.say = function() {
    console.log('main');
  };
  module.exports = obj;
});
// è¾“å‡º
// main1
// main2
```

```js
// enter.1.js
define(function(require, exports, module) {
  var obj = {};
  obj.say = function() {
    console.log('main1');
  };
  module.exports = obj;
});
```

```js
// enter.2.js
define(function(require, exports, module) {
  var obj = {};
  obj.say = function() {
    console.log('main2');
  };
  return obj;
});
```

## AMD ä¸ CMD çš„åŒºåˆ«

1. Require.js(AMD)æ—¢æƒ³æˆä¸ºæµè§ˆå™¨ç¯å¢ƒæ¨¡å—åŠ è½½å™¨ï¼Œä¹Ÿæƒ³æˆä¸º node.js æ¨¡å—åŠ è½½å™¨ï¼ŒSea.js(CMD)ä¸“æ³¨äºæµè§ˆå™¨ç«¯
2. Sea.js æ”¯æŒ debug è°ƒè¯•ï¼ŒSea.js ä¸ CommonJS é£æ ¼ç±»ä¼¼

## UMD( AMD ä¸ CommonJS ç»“åˆ)

1. AMD ä¸ CommonJS çš„ç»“åˆï¼Œè·¨å¹³å°è§£å†³æ¨¡å—åŠ è½½é—®é¢˜
2. é€‰æ‹© AMD å¼‚æ­¥åŠ è½½ï¼Œé€‰æ‹© CommonJS åŒæ­¥åŠ è½½
3. é¦–å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯ nodejs ç¯å¢ƒï¼ˆexports æ˜¯å¦æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œå†åˆ¤æ–­æ˜¯å¦æ”¯æŒ AMDï¼ˆdefine æ˜¯å¦æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼‰ï¼Œå¦åˆ™ä½¿ç”¨å…¨å±€å˜é‡è§„èŒƒ

```js
(function(root, factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD
    define(['jquery', 'underscore'], factory);
  } else if (typeof exports === 'object') {
    // Node, CommonJSä¹‹ç±»çš„
    module.exports = factory(require('jquery'), require('underscore'));
  } else {
    // æµè§ˆå™¨å…¨å±€å˜é‡(root å³ window)
    root.returnExports = factory(root.jQuery, root._);
  }
})(this, function($, _) {
  function a() {}

  function b() {}

  function c() {
    console.log('c');
  }

  return {
    b: b,
    c: c
  };
});
returnExports.c();
```

## ES6 module

1. æŒ‰éœ€åŠ è½½
2. æ”¯æŒæµè§ˆå™¨ç¯å¢ƒå’ŒæœåŠ¡å™¨ç¯å¢ƒ
3. æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥

```js
// å†™æ³•1
// å¯¼å‡º
export var firstName = 'Michael';
export var lastName = 'Jackson';
export var year = 1958;
// å¯¼å…¥
import { firstName, lastName, year } from './index.js';
```

```js
// å†™æ³•2
var firstName = 'Michael';
var lastName = 'Jackson';
var year = 1958;
// å¯¼å‡º
export { firstName, lastName, year };
// å¯¼å…¥
import { firstName, lastName, year } from './index.js';
```

```js
// å†™æ³•3
var firstName = 'Michael';
// å¯¼å‡º
export { lastName as firstName };
// å¯¼å…¥
import { lastName as firstName } from './index.js';
```

```js
// å†™æ³•4
var firstName = 'Michael';
// å¯¼å‡º
export default firstName;
// å¯¼å…¥
import firstName from './index.js';
```

## å‚è€ƒ

[JS æ¨¡å—è§„èŒƒï¼šAMDã€UMDã€CMDã€commonJSã€ES6 module](https://segmentfault.com/a/1190000012419990)

[å…³äº CommonJS AMD CMD UMD è§„èŒƒçš„å·®å¼‚æ€»ç»“](https://www.cnblogs.com/imwtr/p/4666181.html)
